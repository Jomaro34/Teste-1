<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Assistente de Corre√ß√£o ‚Äî Portugu√™s</title>
<style>
  :root{--bg:#f3f6f9;--card:#fff;--accent:#0b63a7;--muted:#6b7280;--success:#059669;--danger:#dc2626;--warning:#f59e0b}
  *{box-sizing:border-box}
  body{font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);margin:0;padding:24px}
  .wrap{max-width:1200px;margin:0 auto}
  header{display:flex;align-items:center;gap:16px;margin-bottom:18px;flex-wrap:wrap}
  h1{margin:0;font-size:20px}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:18px}
  @media(max-width:900px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
  textarea{width:100%;min-height:140px;border:1px solid #e6eef6;border-radius:8px;padding:12px;font-size:15px;font-family:inherit;resize:vertical}
  button{background:var(--accent);color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;font-size:14px;transition:opacity 0.2s}
  button:hover{opacity:0.9}
  button:disabled{opacity:0.5;cursor:not-allowed}
  .secondary{background:#475569}
  .success{background:var(--success)}
  .danger{background:var(--danger)}
  .warning{background:var(--warning)}
  .muted{color:var(--muted);font-size:13px}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .pill{background:#eef6fb;padding:6px 10px;border-radius:999px;font-size:13px;color:var(--accent);font-weight:500}
  .rule-count{font-weight:600;color:var(--accent)}
  .alert{padding:10px;border-radius:8px;margin:10px 0;font-size:14px}
  .alert-success{background:#d1fae5;color:#065f46;border:1px solid #6ee7b7}
  .alert-info{background:#dbeafe;color:#1e40af;border:1px solid #93c5fd}
  .alert-warning{background:#fef3c7;color:#92400e;border:1px solid #fcd34d}
  .alert-danger{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5}
  h3,h4{margin-top:0}
  code{background:#f1f5f9;padding:2px 6px;border-radius:4px;font-size:13px;color:#334155}
  .correcao-item{background:#fff;border:1px solid #e0f2fe;border-radius:8px;padding:12px;margin-bottom:10px}
  .correcao-item .antes{color:#dc2626;text-decoration:line-through;font-weight:500}
  .correcao-item .depois{color:#059669;font-weight:500}
  .correcao-item .explicacao{font-size:13px;color:#6b7280;margin-top:4px}
  .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin:16px 0}
  .stat-box{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:12px;border-radius:8px;text-align:center}
  .stat-box.green{background:linear-gradient(135deg,#059669 0%,#10b981 100%)}
  .stat-box.orange{background:linear-gradient(135deg,#f59e0b 0%,#f97316 100%)}
  .stat-num{font-size:24px;font-weight:700}
  .stat-label{font-size:12px;opacity:0.9;margin-top:2px}
  .exemplo{background:#fef3c7;border-left:4px solid #f59e0b;padding:10px;margin:10px 0;border-radius:4px;font-size:13px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>‚úçÔ∏è Assistente de Corre√ß√£o ‚Äî Portugu√™s</h1>
    <div class="muted">Corrige automaticamente erros ortogr√°ficos e gramaticais em portugu√™s</div>
  </header>

  <div id="alerts"></div>

  <div class="grid">
    <div class="card">
      <h3>üìù Texto Original</h3>
      <textarea id="inputText" placeholder="Cola ou escreve o teu texto aqui... 

Exemplo: 'Eu tanbem gosto muito de ir a praia e tomar un cafe.'"></textarea>
      
      <div class="controls">
        <button id="btnCorrigir">üîß Corrigir Agora</button>
        <button id="btnLimpar" class="secondary">üóëÔ∏è Limpar Tudo</button>
        <button id="btnExemplo" class="warning">üìã Carregar Exemplo</button>
        <div class="pill">Regras ativas: <span id="ruleCount" class="rule-count">0</span></div>
      </div>

      <div class="stats" id="statsBox" style="display:none">
        <div class="stat-box green">
          <div class="stat-num" id="statCorretas">0</div>
          <div class="stat-label">Palavras corretas</div>
        </div>
        <div class="stat-box orange">
          <div class="stat-num" id="statErros">0</div>
          <div class="stat-label">Erros encontrados</div>
        </div>
        <div class="stat-box">
          <div class="stat-num" id="statPalavras">0</div>
          <div class="stat-label">Total de palavras</div>
        </div>
      </div>

      <div style="height:16px"></div>
      <h4>‚úÖ Texto Corrigido</h4>
      <textarea id="outputText" readonly style="background:#f0fdf4;border:2px solid #10b981"></textarea>

      <button id="btnCopiar" class="success" style="margin-top:10px;width:100%">üìã Copiar Texto Corrigido</button>
    </div>

    <div class="card">
      <h3>üìä Relat√≥rio de Corre√ß√µes</h3>
      <div class="muted small" style="margin-bottom:12px">
        Todas as corre√ß√µes aplicadas ao teu texto:
      </div>
      
      <div id="relatorioBox" style="max-height:500px;overflow-y:auto">
        <div class="muted" style="text-align:center;padding:40px 20px;background:#f9fafb;border-radius:8px">
          ‚ÑπÔ∏è Clica em "Corrigir Agora" para ver o relat√≥rio detalhado
        </div>
      </div>

      <div style="height:20px"></div>
      
      <div class="exemplo">
        <strong>üí° Como funciona:</strong><br>
        1. Cola ou escreve o teu texto<br>
        2. Clica em "Corrigir Agora"<br>
        3. Rev√™ as corre√ß√µes sugeridas<br>
        4. Copia o texto corrigido
      </div>
    </div>
  </div>
</div>

<script>
// ================= REGRAS DE CORRE√á√ÉO ORTOGR√ÅFICA =================
const regrasOrtograficas = [
  // Erros comuns de digita√ß√£o
  {palavra: /\btanbem\b/gi, correcao: 'tamb√©m', tipo: 'Ortografia', explicacao: 'Acentua√ß√£o correta: tamb√©m'},
  {palavra: /\btambem\b/gi, correcao: 'tamb√©m', tipo: 'Ortografia', explicacao: 'Falta acento: tamb√©m'},
  {palavra: /\bvc\b/gi, correcao: 'voc√™', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas informais'},
  {palavra: /\btb\b/gi, correcao: 'tamb√©m', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas informais'},
  {palavra: /\bpq\b/gi, correcao: 'porque', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas informais'},
  {palavra: /\bkd\b/gi, correcao: 'cad√™', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas informais'},
  
  // Acentua√ß√£o
  {palavra: /\bcafe\b/gi, correcao: 'caf√©', tipo: 'Acentua√ß√£o', explicacao: 'Falta acento agudo: caf√©'},
  {palavra: /\bvoce\b/gi, correcao: 'voc√™', tipo: 'Acentua√ß√£o', explicacao: 'Falta acento circunflexo: voc√™'},
  {palavra: /\be\s+/gi, correcao: '√© ', tipo: 'Acentua√ß√£o', explicacao: 'Verbo "ser" no presente: √©'},
  {palavra: /\bsera\b/gi, correcao: 'ser√°', tipo: 'Acentua√ß√£o', explicacao: 'Futuro do verbo ser: ser√°'},
  {palavra: /\bpara\s+(o|a|os|as)\b/gi, correcao: (match, artigo) => `para ${artigo}`, tipo: 'Corre√ß√£o', explicacao: 'Corre√ß√£o gramatical'},
  
  // Artigos
  {palavra: /\bun\s+/gi, correcao: 'um ', tipo: 'Artigo', explicacao: 'Artigo indefinido masculino: um'},
  {palavra: /\buma\s+([aeiou√°√©√≠√≥√∫])/gi, correcao: 'uma $1', tipo: 'Artigo', explicacao: 'Artigo indefinido feminino: uma'},
  
  // A/√Ä
  {palavra: /\ba\s+(a|as)\s+/gi, correcao: '√† $1 ', tipo: 'Crase', explicacao: 'Crase antes de artigo definido feminino'},
  {palavra: /\bvou\s+a\s+praia\b/gi, correcao: 'vou √† praia', tipo: 'Crase', explicacao: 'Crase obrigat√≥ria: √† praia'},
  {palavra: /\bvou\s+a\s+escola\b/gi, correcao: 'vou √† escola', tipo: 'Crase', explicacao: 'Crase obrigat√≥ria: √† escola'},
  
  // Mais vs Mas
  {palavra: /\b,\s*mas\s+/gi, correcao: ', mas ', tipo: 'Conjun√ß√£o', explicacao: 'Conjun√ß√£o adversativa: mas (n√£o mais)'},
  
  // Homonimos
  {palavra: /\bmais\s+(n√£o|nao|nunca|nem)/gi, correcao: 'mas $1', tipo: 'Hom√¥nimo', explicacao: 'Conjun√ß√£o adversativa: mas (n√£o mais)'},
  {palavra: /\bonde\s+(voce|voc√™|tu|ele|ela|eles|elas)/gi, correcao: 'aonde $1', tipo: 'Hom√¥nimo', explicacao: 'Com movimento: aonde (para onde)'},
  
  // Plural
  {palavra: /\bpessoas\s+muito\b/gi, correcao: 'pessoas muito', tipo: 'Concord√¢ncia', explicacao: 'Concord√¢ncia nominal correta'},
  
  // Espa√ßamento e pontua√ß√£o
  {palavra: /\s{2,}/g, correcao: ' ', tipo: 'Formata√ß√£o', explicacao: 'Remover espa√ßos duplicados'},
  {palavra: /\s+,/g, correcao: ',', tipo: 'Pontua√ß√£o', explicacao: 'Espa√ßo antes de v√≠rgula'},
  {palavra: /\s+\./g, correcao: '.', tipo: 'Pontua√ß√£o', explicacao: 'Espa√ßo antes de ponto'},
  {palavra: /\s+!/g, correcao: '!', tipo: 'Pontua√ß√£o', explicacao: 'Espa√ßo antes de exclama√ß√£o'},
  {palavra: /\s+\?/g, correcao: '?', tipo: 'Pontua√ß√£o', explicacao: 'Espa√ßo antes de interroga√ß√£o'},
  {palavra: /([,\.!?:;])([A-Za-z√Ä-√ø])/g, correcao: '$1 $2', tipo: 'Pontua√ß√£o', explicacao: 'Espa√ßo ap√≥s pontua√ß√£o'},
  
  // Mai√∫sculas ap√≥s ponto
  {palavra: /\.\s+([a-z√†-√ø])/g, correcao: (match, letra) => `. ${letra.toUpperCase()}`, tipo: 'Mai√∫scula', explicacao: 'Mai√∫scula ap√≥s ponto final'},
  
  // Erros comuns portugueses
  {palavra: /\bbom\s+dia\b/gi, correcao: 'bom dia', tipo: 'Sauda√ß√£o', explicacao: 'Sauda√ß√£o sem h√≠fen'},
  {palavra: /\bboa\s+tarde\b/gi, correcao: 'boa tarde', tipo: 'Sauda√ß√£o', explicacao: 'Sauda√ß√£o sem h√≠fen'},
  {palavra: /\bboa\s+noite\b/gi, correcao: 'boa noite', tipo: 'Sauda√ß√£o', explicacao: 'Sauda√ß√£o sem h√≠fen'},
  {palavra: /\bde\s+repente\b/gi, correcao: 'de repente', tipo: 'Locu√ß√£o', explicacao: 'Locu√ß√£o adverbial correta'},
  {palavra: /\bpor\s+isso\b/gi, correcao: 'por isso', tipo: 'Locu√ß√£o', explicacao: 'Locu√ß√£o conjuntiva correta'},
  {palavra: /\btalvez\b/gi, correcao: 'talvez', tipo: 'Adv√©rbio', explicacao: 'Adv√©rbio de d√∫vida'},
];

// ================= UTILIT√ÅRIOS =================
function showAlert(msg, type='info') {
  const alertBox = document.getElementById('alerts');
  const div = document.createElement('div');
  div.className = `alert alert-${type}`;
  div.textContent = msg;
  alertBox.appendChild(div);
  setTimeout(() => div.remove(), 5000);
}

// ================= CORRE√á√ÉO DE TEXTO =================
let correcoes = [];

function corrigirTexto() {
  const input = document.getElementById('inputText').value;
  
  if(!input.trim()) {
    showAlert('‚ö†Ô∏è Por favor, escreve algo para corrigir!', 'warning');
    return;
  }
  
  let textoCorrigido = input;
  correcoes = [];
  
  // Aplicar cada regra
  regrasOrtograficas.forEach(regra => {
    const matches = textoCorrigido.match(regra.palavra);
    if(matches) {
      const antes = textoCorrigido;
      textoCorrigido = textoCorrigido.replace(regra.palavra, regra.correcao);
      
      if(antes !== textoCorrigido) {
        matches.forEach(match => {
          correcoes.push({
            antes: match.trim(),
            depois: typeof regra.correcao === 'function' ? 
              match.replace(regra.palavra, regra.correcao).trim() : 
              regra.correcao,
            tipo: regra.tipo,
            explicacao: regra.explicacao
          });
        });
      }
    }
  });
  
  // Atualizar output
  document.getElementById('outputText').value = textoCorrigido;
  
  // Atualizar estat√≠sticas
  const palavrasOriginais = input.trim().split(/\s+/).length;
  const errosEncontrados = correcoes.length;
  const palavrasCorretas = palavrasOriginais - errosEncontrados;
  
  document.getElementById('statCorretas').textContent = palavrasCorretas;
  document.getElementById('statErros').textContent = errosEncontrados;
  document.getElementById('statPalavras').textContent = palavrasOriginais;
  document.getElementById('statsBox').style.display = 'grid';
  
  // Gerar relat√≥rio
  gerarRelatorio();
  
  if(correcoes.length > 0) {
    showAlert(`‚úÖ ${correcoes.length} corre√ß√£o(√µes) aplicada(s)!`, 'success');
  } else {
    showAlert('üéâ Nenhum erro encontrado! Texto perfeito!', 'success');
  }
}

function gerarRelatorio() {
  const box = document.getElementById('relatorioBox');
  
  if(correcoes.length === 0) {
    box.innerHTML = `
      <div style="text-align:center;padding:40px 20px;background:#d1fae5;border-radius:8px;border:2px solid #10b981">
        <div style="font-size:48px;margin-bottom:10px">üéâ</div>
        <strong style="color:#065f46;font-size:16px">Excelente!</strong><br>
        <span style="color:#047857;font-size:14px">N√£o foram encontrados erros no texto.</span>
      </div>
    `;
    return;
  }
  
  let html = '';
  
  // Agrupar por tipo
  const porTipo = {};
  correcoes.forEach(c => {
    if(!porTipo[c.tipo]) porTipo[c.tipo] = [];
    porTipo[c.tipo].push(c);
  });
  
  Object.keys(porTipo).forEach(tipo => {
    html += `<h4 style="margin:16px 0 10px 0;color:var(--accent);border-bottom:2px solid #e0f2fe;padding-bottom:6px">
      üìå ${tipo} (${porTipo[tipo].length})
    </h4>`;
    
    porTipo[tipo].forEach((c, idx) => {
      html += `
        <div class="correcao-item">
          <div style="margin-bottom:6px">
            <span class="antes">${c.antes}</span> 
            <span style="color:#6b7280;margin:0 8px">‚Üí</span> 
            <span class="depois">${c.depois}</span>
          </div>
          <div class="explicacao">üí° ${c.explicacao}</div>
        </div>
      `;
    });
  });
  
  box.innerHTML = html;
}

// ================= EVENT LISTENERS =================
document.getElementById('btnCorrigir').addEventListener('click', corrigirTexto);

document.getElementById('btnLimpar').addEventListener('click', () => {
  document.getElementById('inputText').value = '';
  document.getElementById('outputText').value = '';
  document.getElementById('relatorioBox').innerHTML = `
    <div class="muted" style="text-align:center;padding:40px 20px;background:#f9fafb;border-radius:8px">
      ‚ÑπÔ∏è Clica em "Corrigir Agora" para ver o relat√≥rio detalhado
    </div>
  `;
  document.getElementById('statsBox').style.display = 'none';
  correcoes = [];
  showAlert('üóëÔ∏è Tudo limpo!', 'info');
});

document.getElementById('btnExemplo').addEventListener('click', () => {
  document.getElementById('inputText').value = `Ola! Eu tanbem gosto muito de ir a praia e tomar un cafe pela manha. voce vai amanha? pq eu posso ir tb. sera que vai chover? Mas eu acho que e melhor irmos de tarde.`;
  showAlert('üìã Exemplo carregado! Agora clica em "Corrigir Agora"', 'info');
});

document.getElementById('btnCopiar').addEventListener('click', () => {
  const texto = document.getElementById('outputText').value;
  if(!texto) {
    showAlert('‚ö†Ô∏è Nada para copiar! Corrige um texto primeiro.', 'warning');
    return;
  }
  
  navigator.clipboard.writeText(texto).then(() => {
    showAlert('‚úÖ Texto copiado para a √°rea de transfer√™ncia!', 'success');
  }).catch(() => {
    showAlert('‚ùå Erro ao copiar. Seleciona e copia manualmente.', 'danger');
  });
});

// Atualizar contador de regras
document.getElementById('ruleCount').textContent = regrasOrtograficas.length;

console.log('‚úçÔ∏è Assistente de Corre√ß√£o inicializado com', regrasOrtograficas.length, 'regras');
</script>
</body>
</html>
