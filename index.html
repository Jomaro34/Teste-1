<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Assistente de Corre√ß√£o ‚Äî Portugu√™s</title>
<style>
  :root{--bg:#f3f6f9;--card:#fff;--accent:#0b63a7;--muted:#6b7280;--success:#059669;--danger:#dc2626;--warning:#f59e0b}
  *{box-sizing:border-box}
  body{font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);margin:0;padding:24px}
  .wrap{max-width:1200px;margin:0 auto}
  header{display:flex;align-items:center;gap:16px;margin-bottom:18px;flex-wrap:wrap}
  h1{margin:0;font-size:20px}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:18px}
  @media(max-width:900px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
  textarea{width:100%;min-height:140px;border:1px solid #e6eef6;border-radius:8px;padding:12px;font-size:15px;font-family:inherit;resize:vertical}
  button{background:var(--accent);color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;font-size:14px;transition:opacity 0.2s}
  button:hover{opacity:0.9}
  button:disabled{opacity:0.5;cursor:not-allowed}
  .secondary{background:#475569}
  .success{background:var(--success)}
  .danger{background:var(--danger)}
  .warning{background:var(--warning)}
  .muted{color:var(--muted);font-size:13px}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .pill{background:#eef6fb;padding:6px 10px;border-radius:999px;font-size:13px;color:var(--accent);font-weight:500}
  .rule-count{font-weight:600;color:var(--accent)}
  .alert{padding:10px;border-radius:8px;margin:10px 0;font-size:14px}
  .alert-success{background:#d1fae5;color:#065f46;border:1px solid #6ee7b7}
  .alert-info{background:#dbeafe;color:#1e40af;border:1px solid #93c5fd}
  .alert-warning{background:#fef3c7;color:#92400e;border:1px solid #fcd34d}
  .alert-danger{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5}
  h3,h4{margin-top:0}
  code{background:#f1f5f9;padding:2px 6px;border-radius:4px;font-size:13px;color:#334155}
  .correcao-item{background:#fff;border:1px solid #e0f2fe;border-radius:8px;padding:12px;margin-bottom:10px}
  .correcao-item .antes{color:#dc2626;text-decoration:line-through;font-weight:500}
  .correcao-item .depois{color:#059669;font-weight:500}
  .correcao-item .explicacao{font-size:13px;color:#6b7280;margin-top:4px}
  .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin:16px 0}
  .stat-box{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:12px;border-radius:8px;text-align:center}
  .stat-box.green{background:linear-gradient(135deg,#059669 0%,#10b981 100%)}
  .stat-box.orange{background:linear-gradient(135deg,#f59e0b 0%,#f97316 100%)}
  .stat-num{font-size:24px;font-weight:700}
  .stat-label{font-size:12px;opacity:0.9;margin-top:2px}
  .exemplo{background:#fef3c7;border-left:4px solid #f59e0b;padding:10px;margin:10px 0;border-radius:4px;font-size:13px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>‚úçÔ∏è Assistente de Corre√ß√£o ‚Äî Portugu√™s</h1>
    <div class="muted">Corrige automaticamente erros ortogr√°ficos e gramaticais em portugu√™s</div>
  </header>

  <div id="alerts"></div>

  <div class="grid">
    <div class="card">
      <h3>üìù Texto Original</h3>
      <textarea id="inputText" placeholder="Cola ou escreve o teu texto aqui... 

Exemplo: 'Eu vai √° escolaa e depois vamos tomar un cafe.'"></textarea>
      
      <div class="controls">
        <button id="btnCorrigir">üîß Corrigir Agora</button>
        <button id="btnLimpar" class="secondary">üóëÔ∏è Limpar Tudo</button>
        <button id="btnExemplo" class="warning">üìã Carregar Exemplo</button>
        <div class="pill">Regras ativas: <span id="ruleCount" class="rule-count">0</span></div>
      </div>

      <div class="stats" id="statsBox" style="display:none">
        <div class="stat-box green">
          <div class="stat-num" id="statCorretas">0</div>
          <div class="stat-label">Palavras corretas</div>
        </div>
        <div class="stat-box orange">
          <div class="stat-num" id="statErros">0</div>
          <div class="stat-label">Erros encontrados</div>
        </div>
        <div class="stat-box">
          <div class="stat-num" id="statPalavras">0</div>
          <div class="stat-label">Total de palavras</div>
        </div>
      </div>

      <div style="height:16px"></div>
      <h4>‚úÖ Texto Corrigido</h4>
      <textarea id="outputText" readonly style="background:#f0fdf4;border:2px solid #10b981"></textarea>

      <button id="btnCopiar" class="success" style="margin-top:10px;width:100%">üìã Copiar Texto Corrigido</button>
    </div>

    <div class="card">
      <h3>üìä Relat√≥rio de Corre√ß√µes</h3>
      <div class="muted small" style="margin-bottom:12px">
        Todas as corre√ß√µes aplicadas ao teu texto:
      </div>
      
      <div id="relatorioBox" style="max-height:500px;overflow-y:auto">
        <div class="muted" style="text-align:center;padding:40px 20px;background:#f9fafb;border-radius:8px">
          ‚ÑπÔ∏è Clica em "Corrigir Agora" para ver o relat√≥rio detalhado
        </div>
      </div>

      <div style="height:20px"></div>
      
      <div class="exemplo">
        <strong>üí° Como funciona:</strong><br>
        1. Cola ou escreve o teu texto<br>
        2. Clica em "Corrigir Agora"<br>
        3. Rev√™ as corre√ß√µes sugeridas<br>
        4. Copia o texto corrigido
      </div>
    </div>
  </div>
</div>

<script>
// ================= REGRAS DE CORRE√á√ÉO ORTOGR√ÅFICA =================
const regrasOrtograficas = [
  // CONJUGA√á√ïES VERBAIS - EU
  {palavra: /\beu\s+vai\b/gi, correcao: 'eu vou', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ir" na 1¬™ pessoa do singular: EU VOU'},
  {palavra: /\beu\s+vamos\b/gi, correcao: 'eu vou', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'EU = vou (n√£o vamos)'},
  {palavra: /\beu\s+√©\b/gi, correcao: 'eu sou', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ser": EU SOU'},
  {palavra: /\beu\s+est√°\b/gi, correcao: 'eu estou', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "estar": EU ESTOU'},
  {palavra: /\beu\s+tem\b/gi, correcao: 'eu tenho', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ter": EU TENHO'},
  {palavra: /\beu\s+faz\b/gi, correcao: 'eu fa√ßo', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "fazer": EU FA√áO'},
  {palavra: /\beu\s+quer\b/gi, correcao: 'eu quero', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "querer": EU QUERO'},
  
  // CONJUGA√á√ïES VERBAIS - TU
  {palavra: /\btu\s+vou\b/gi, correcao: 'tu vais', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ir": TU VAIS'},
  {palavra: /\btu\s+sou\b/gi, correcao: 'tu √©s', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ser": TU √âS'},
  {palavra: /\btu\s+tem\b/gi, correcao: 'tu tens', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ter": TU TENS'},
  
  // CONJUGA√á√ïES VERBAIS - ELE/ELA
  {palavra: /\bele\s+vou\b/gi, correcao: 'ele vai', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ir": ELE VAI'},
  {palavra: /\bela\s+vou\b/gi, correcao: 'ela vai', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ir": ELA VAI'},
  {palavra: /\bele\s+sou\b/gi, correcao: 'ele √©', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ser": ELE √â'},
  {palavra: /\bela\s+sou\b/gi, correcao: 'ela √©', tipo: 'Conjuga√ß√£o Verbal', explicacao: 'Verbo "ser": ELA √â'},
  
  // LETRAS DUPLICADAS (erros de digita√ß√£o)
  {palavra: /\b(\w+?)([aeiou√°√©√≠√≥√∫√£√µ√¢√™√¥])\2+(\w*)\b/gi, correcao: (match, inicio, vogal, fim) => inicio + vogal + fim, tipo: 'Ortografia', explicacao: 'Letras duplicadas desnecess√°rias'},
  {palavra: /\b(\w+?)([bcdfghjklmnpqrstvwxyz])\2{2,}(\w*)\b/gi, correcao: (match, inicio, consoante, fim) => inicio + consoante + fim, tipo: 'Ortografia', explicacao: 'Consoantes triplicadas (erro)'},
  
  // ACENTOS INCORRETOS
  {palavra: /\b√°\b/gi, correcao: '√†', tipo: 'Acentua√ß√£o', explicacao: 'Crase: √Ä (n√£o √Å)'},
  {palavra: /\be\s+/g, correcao: '√© ', tipo: 'Acentua√ß√£o', explicacao: 'Verbo "ser" presente: √â (com acento)'},
  
  // CRASE
  {palavra: /\ba\s+a\s+/gi, correcao: '√† ', tipo: 'Crase', explicacao: 'Crase: preposi√ß√£o A + artigo A = √Ä'},
  {palavra: /\bvou\s+a\s+(escola|praia|casa|cidade|farm√°cia|loja)\b/gi, correcao: 'vou √† $1', tipo: 'Crase', explicacao: 'Crase obrigat√≥ria antes de lugar feminino'},
  {palavra: /\bchego\s+a\s+(escola|praia|casa|cidade|farm√°cia|loja)\b/gi, correcao: 'chego √† $1', tipo: 'Crase', explicacao: 'Crase obrigat√≥ria'},
  {palavra: /\ba\s+as\s+/gi, correcao: '√†s ', tipo: 'Crase', explicacao: 'Crase no plural: √ÄS'},
  
  // Erros comuns de digita√ß√£o
  {palavra: /\btanbem\b/gi, correcao: 'tamb√©m', tipo: 'Ortografia', explicacao: 'Forma correta: TAMB√âM'},
  {palavra: /\btambem\b/gi, correcao: 'tamb√©m', tipo: 'Ortografia', explicacao: 'Falta acento: TAMB√âM'},
  {palavra: /\bvc\b/gi, correcao: 'voc√™', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas: VOC√ä'},
  {palavra: /\btb\b/gi, correcao: 'tamb√©m', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas: TAMB√âM'},
  {palavra: /\bpq\b/gi, correcao: 'porque', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas: PORQUE'},
  {palavra: /\bkd\b/gi, correcao: 'cad√™', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas: CAD√ä'},
  {palavra: /\bn\b/gi, correcao: 'n√£o', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas: N√ÉO'},
  {palavra: /\bmto\b/gi, correcao: 'muito', tipo: 'Abreviatura', explicacao: 'Evitar abreviaturas: MUITO'},
  
  // Acentua√ß√£o b√°sica
  {palavra: /\bcafe\b/gi, correcao: 'caf√©', tipo: 'Acentua√ß√£o', explicacao: 'Acento agudo: CAF√â'},
  {palavra: /\bvoce\b/gi, correcao: 'voc√™', tipo: 'Acentua√ß√£o', explicacao: 'Acento circunflexo: VOC√ä'},
  {palavra: /\bsera\b/gi, correcao: 'ser√°', tipo: 'Acentua√ß√£o', explicacao: 'Futuro: SER√Å'},
  {palavra: /\besta\b/gi, correcao: 'est√°', tipo: 'Acentua√ß√£o', explicacao: 'Verbo estar: EST√Å'},
  {palavra: /\bestao\b/gi, correcao: 'est√£o', tipo: 'Acentua√ß√£o', explicacao: 'Plural: EST√ÉO'},
  {palavra: /\bsao\b/gi, correcao: 's√£o', tipo: 'Acentua√ß√£o', explicacao: 'Verbo ser/adjetivo: S√ÉO'},
  {palavra: /\btem\b/gi, correcao: 't√™m', tipo: 'Acentua√ß√£o', explicacao: '3¬™ pessoa plural: T√äM (eles t√™m)'},
  {palavra: /\bpara\b/gi, correcao: 'para', tipo: 'Verifica√ß√£o', explicacao: 'Preposi√ß√£o (n√£o precisa acento geralmente)'},
  
  // Artigos
  {palavra: /\bun\s+/gi, correcao: 'um ', tipo: 'Artigo', explicacao: 'Artigo indefinido: UM'},
  {palavra: /\buns\s+/gi, correcao: 'uns ', tipo: 'Artigo', explicacao: 'Artigo plural: UNS'},
  
  // Mais vs Mas
  {palavra: /\bmais\s+(n√£o|nao|nunca|nem|tamb√©m|eu|voc√™|ele|ela)/gi, correcao: 'mas $1', tipo: 'Conjun√ß√£o', explicacao: 'Conjun√ß√£o adversativa: MAS (por√©m)'},
  
  // Onde vs Aonde
  {palavra: /\bonde\s+(vou|vamos|vai|vais|foram)\b/gi, correcao: 'aonde $1', tipo: 'Adv√©rbio', explicacao: 'Com movimento: AONDE'},
  
  // H√° vs A
  {palavra: /\ba\s+(\d+)\s+(anos|meses|dias|horas)\b/gi, correcao: 'h√° $1 $2', tipo: 'Verbo haver', explicacao: 'Tempo passado: H√Å (n√£o A)'},
  
  // Por que / Porque / Porqu√™ / Por qu√™
  {palavra: /\bpor\s+que\s+([^?]*)\?/gi, correcao: 'por que $1?', tipo: 'Ortografia', explicacao: 'Pergunta: POR QUE (separado)'},
  {palavra: /\bporque\s+([^.!?]*)[.!]/gi, correcao: 'porque $1', tipo: 'Ortografia', explicacao: 'Resposta: PORQUE (junto)'},
  
  // Espa√ßamento e pontua√ß√£o
  {palavra: /\s{2,}/g, correcao: ' ', tipo: 'Formata√ß√£o', explicacao: 'Espa√ßos duplicados'},
  {palavra: /\s+,/g, correcao: ',', tipo: 'Pontua√ß√£o', explicacao: 'Sem espa√ßo antes de v√≠rgula'},
  {palavra: /\s+\./g, correcao: '.', tipo: 'Pontua√ß√£o', explicacao: 'Sem espa√ßo antes de ponto'},
  {palavra: /\s+!/g, correcao: '!', tipo: 'Pontua√ß√£o', explicacao: 'Sem espa√ßo antes de !'},
  {palavra: /\s+\?/g, correcao: '?', tipo: 'Pontua√ß√£o', explicacao: 'Sem espa√ßo antes de ?'},
  {palavra: /([,\.!?:;])([A-Za-z√Ä-√ø])/g, correcao: '$1 $2', tipo: 'Pontua√ß√£o', explicacao: 'Espa√ßo ap√≥s pontua√ß√£o'},
  
  // Mai√∫sculas
  {palavra: /\.\s+([a-z√†-√ø])/g, correcao: (match, letra) => `. ${letra.toUpperCase()}`, tipo: 'Mai√∫scula', explicacao: 'Mai√∫scula ap√≥s ponto'},
  {palavra: /^([a-z√†-√ø])/g, correcao: (match, letra) => letra.toUpperCase(), tipo: 'Mai√∫scula', explicacao: 'Mai√∫scula no in√≠cio do texto'},
];

// ================= UTILIT√ÅRIOS =================
function showAlert(msg, type='info') {
  const alertBox = document.getElementById('alerts');
  const div = document.createElement('div');
  div.className = `alert alert-${type}`;
  div.textContent = msg;
  alertBox.appendChild(div);
  setTimeout(() => div.remove(), 5000);
}

// ================= CORRE√á√ÉO DE TEXTO =================
let correcoes = [];

function corrigirTexto() {
  const input = document.getElementById('inputText').value;
  
  if(!input.trim()) {
    showAlert('‚ö†Ô∏è Por favor, escreve algo para corrigir!', 'warning');
    return;
  }
  
  let textoCorrigido = input;
  correcoes = [];
  let mudancas = new Set();
  
  // Aplicar cada regra
  regrasOrtograficas.forEach(regra => {
    const antes = textoCorrigido;
    
    // Para fun√ß√µes de substitui√ß√£o complexas
    if(typeof regra.correcao === 'function') {
      textoCorrigido = textoCorrigido.replace(regra.palavra, (...args) => {
        const original = args[0];
        const resultado = regra.correcao(...args);
        if(original !== resultado && !mudancas.has(original + resultado)) {
          mudancas.add(original + resultado);
          correcoes.push({
            antes: original.trim(),
            depois: resultado.trim(),
            tipo: regra.tipo,
            explicacao: regra.explicacao
          });
        }
        return resultado;
      });
    } else {
      // Para substitui√ß√µes simples
      textoCorrigido = textoCorrigido.replace(regra.palavra, (match) => {
        if(match !== regra.correcao && !mudancas.has(match + regra.correcao)) {
          mudancas.add(match + regra.correcao);
          correcoes.push({
            antes: match.trim(),
            depois: regra.correcao.trim(),
            tipo: regra.tipo,
            explicacao: regra.explicacao
          });
        }
        return regra.correcao;
      });
    }
  });
  
  // Atualizar output
  document.getElementById('outputText').value = textoCorrigido;
  
  // Atualizar estat√≠sticas
  const palavrasOriginais = input.trim().split(/\s+/).length;
  const errosEncontrados = correcoes.length;
  const palavrasCorretas = Math.max(0, palavrasOriginais - errosEncontrados);
  
  document.getElementById('statCorretas').textContent = palavrasCorretas;
  document.getElementById('statErros').textContent = errosEncontrados;
  document.getElementById('statPalavras').textContent = palavrasOriginais;
  document.getElementById('statsBox').style.display = 'grid';
  
  // Gerar relat√≥rio
  gerarRelatorio();
  
  if(correcoes.length > 0) {
    showAlert(`‚úÖ ${correcoes.length} corre√ß√£o(√µes) aplicada(s)!`, 'success');
  } else {
    showAlert('üéâ Nenhum erro encontrado! Texto perfeito!', 'success');
  }
}

function gerarRelatorio() {
  const box = document.getElementById('relatorioBox');
  
  if(correcoes.length === 0) {
    box.innerHTML = `
      <div style="text-align:center;padding:40px 20px;background:#d1fae5;border-radius:8px;border:2px solid #10b981">
        <div style="font-size:48px;margin-bottom:10px">üéâ</div>
        <strong style="color:#065f46;font-size:16px">Excelente!</strong><br>
        <span style="color:#047857;font-size:14px">N√£o foram encontrados erros no texto.</span>
      </div>
    `;
    return;
  }
  
  let html = '';
  
  // Agrupar por tipo
  const porTipo = {};
  correcoes.forEach(c => {
    if(!porTipo[c.tipo]) porTipo[c.tipo] = [];
    porTipo[c.tipo].push(c);
  });
  
  Object.keys(porTipo).forEach(tipo => {
    html += `<h4 style="margin:16px 0 10px 0;color:var(--accent);border-bottom:2px solid #e0f2fe;padding-bottom:6px">
      üìå ${tipo} (${porTipo[tipo].length})
    </h4>`;
    
    porTipo[tipo].forEach((c, idx) => {
      html += `
        <div class="correcao-item">
          <div style="margin-bottom:6px">
            <span class="antes">${c.antes}</span> 
            <span style="color:#6b7280;margin:0 8px">‚Üí</span> 
            <span class="depois">${c.depois}</span>
          </div>
          <div class="explicacao">üí° ${c.explicacao}</div>
        </div>
      `;
    });
  });
  
  box.innerHTML = html;
}

// ================= EVENT LISTENERS =================
document.getElementById('btnCorrigir').addEventListener('click', corrigirTexto);

document.getElementById('btnLimpar').addEventListener('click', () => {
  document.getElementById('inputText').value = '';
  document.getElementById('outputText').value = '';
  document.getElementById('relatorioBox').innerHTML = `
    <div class="muted" style="text-align:center;padding:40px 20px;background:#f9fafb;border-radius:8px">
      ‚ÑπÔ∏è Clica em "Corrigir Agora" para ver o relat√≥rio detalhado
    </div>
  `;
  document.getElementById('statsBox').style.display = 'none';
  correcoes = [];
  showAlert('üóëÔ∏è Tudo limpo!', 'info');
});

document.getElementById('btnExemplo').addEventListener('click', () => {
  document.getElementById('inputText').value = `eu vai √° escolaa e depois vamos tomar un cafe. ele sou muito inteligente e ela tem muita paciencia. vc tambem vai?`;
  showAlert('üìã Exemplo carregado! Agora clica em "Corrigir Agora"', 'info');
});

document.getElementById('btnCopiar').addEventListener('click', () => {
  const texto = document.getElementById('outputText').value;
  if(!texto) {
    showAlert('‚ö†Ô∏è Nada para copiar! Corrige um texto primeiro.', 'warning');
    return;
  }
  
  navigator.clipboard.writeText(texto).then(() => {
    showAlert('‚úÖ Texto copiado para a √°rea de transfer√™ncia!', 'success');
  }).catch(() => {
    showAlert('‚ùå Erro ao copiar. Seleciona e copia manualmente.', 'danger');
  });
});

// Atualizar contador de regras
document.getElementById('ruleCount').textContent = regrasOrtograficas.length;

console.log('‚úçÔ∏è Assistente de Corre√ß√£o inicializado com', regrasOrtograficas.length, 'regras');
</script>
</body>
</html>
