<!DOCTYPE html>
<div class="spinner"></div>
<p>Seres_Imaginarios.pdf</p>
</div>
<canvas id="pdf-canvas" style="display: none;"></canvas>
</div>
</div>


<script>
// Redirecionar ao clicar fora do PDF
document.body.addEventListener('click', function (e) {
const pdfContainer = document.getElementById('pdf-container');
if (!pdfContainer.contains(e.target)) {
window.location.href = "https://jomaro34.github.io/Jomaro-Cabrela/";
}
});


// PDF.js configuração
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';


let pdfDoc = null, pageNum = 1, scale = 1.5, pageRendering = false, pageNumPending = null;
const canvas = document.getElementById('pdf-canvas');
const ctx = canvas.getContext('2d');
const loading = document.getElementById('loading');


window.addEventListener('load', function() {
loadPDFFromURL('Seres_Imaginarios.pdf');
});


function loadPDFFromURL(url) {
pdfjsLib.getDocument(url).promise.then(function(pdf) {
pdfDoc = pdf;
document.getElementById('page-info').textContent = `Página: ${pageNum}/${pdf.numPages}`;
loading.style.display = 'none';
canvas.style.display = 'block';
renderPage(pageNum);
}).catch(function(error) {
loading.innerHTML = '<h2>❌ Erro ao carregar PDF</h2><p>Verifique se o arquivo existe.</p>';
});
}


async function renderPage(num) {
pageRendering = true;
const page = await pdfDoc.getPage(num);
const viewport = page.getViewport({scale: scale});
canvas.height = viewport.height;
canvas.width = viewport.width;


await page.render({canvasContext: ctx, viewport: viewport}).promise;
pageRendering = false;
document.getElementById('page-info').textContent = `Página: ${num}/${pdfDoc.numPages}`;
}


function queueRenderPage(num) {
if (pageRendering) pageNumPending = num;
else renderPage(num);
}


document.getElementById('prev-page').addEventListener('click', () => { if (pageNum > 1) { pageNum--; queueRenderPage(pageNum); } });
document.getElementById('next-page').addEventListener('click', () => { if (pageNum < pdfDoc.numPages) { pageNum++; queueRenderPage(pageNum); } });
document.getElementById('zoom-in').addEventListener('click', () => { scale += 0.25; renderPage(pageNum); });
document.getElementById('zoom-out').addEventListener('click', () => { if (scale > 0.5) { scale -= 0.25; renderPage(pageNum); } });


// Botão de download
document.getElementById('download-pdf').addEventListener('click', function() {
const link = document.createElement('a');
link.href = 'Seres_Imaginarios.pdf';
link.download = 'Seres_Imaginarios.pdf';
link.click();
});
</script>
</body>
</html>
